# STEP7: 更なるStretch課題

## 1. (復習)APIにカテゴリー一覧を返すエンドポイントを追加する
ここでは、[3-8. (Optional) カテゴリの情報を別のテーブルに移す](https://github.com/mercari-build/mercari-build-training-2022/blob/main/document/step3.ja.md)を完了している前提となります。
カテゴリー一覧を返すエンドポイントを作りましょう。

```
curl -X GET http://127.0.0.1:9000/categories
{"categories":[{"id":1,"name":"fashion"},{"id":2,"name":"food"}]}
```
## 2. 新規商品追加時に、カテゴリーをドロップダウンメニューで選択できるようにする
現状では文字を入力する方式でカテゴリーを選択していますが、この方法はある懸念点があります。

それは、**表記ゆれにより似たようなカテゴリーが乱立する可能性が高い**ということです。
例えば、同じ「ファッション」を指すにしてもファッション、fashion、衣類...と様々な
表現が考えられます。この点を考慮すると、ユーザーがどのようなカテゴリー名を入力するかは予測不可能です。

従って、カテゴリーを選択するという作業は**サービス側**がカテゴリー一覧をドロップダウンメニューで提示し、それを**ユーザー側**が選択する形が好ましいと考えられます。

## 3. フロントエンドでList this itemボタンを押した際に、エラーを表示できるようにする
現在はList this itemボタンを押すと、入力状態を一切考慮せずバックエンドにPOSTリクエストを投げている状態です。しかし、ユーザーの入力に以下のような不備がある場合が考えられます。

- 商品名が入力されていない
- カテゴリーが選択されていない
- 画像がアップロードされていない
- 画像が２枚以上アップロードされている

このような入力状態の場合、ユーザーにエラーメッセージを提示して正しい入力状態に変更してもらいましょう。
これにより、**データベースに想定外のレコードが追加され、それに伴いバックエンドでエラーが発生する**という事態を防ぐことができます。

## 4. バックエンドのエラーハンドリング
既に行った方もいらっしゃるかもしれませんが、今一度`main.py`、`main.go`を見直してエラーハンドリングを行いましょう。メンターさんのお話を伺って、以下の点を意識することが大切だと思いました。

- ユーザー目線
    - 適切なHTTPステータスコードを返す。
        - 200は成功の時だけ返しましょう。
    - 適切なエラーメッセージにする。
        - ユーザーに表示するメッセージなので、必要以上に内部情報(どのようなファイルがあるかなど)を開示しないようにしましょう。攻撃のヒントを与えてしまうかもしれません。
- 開発者目線
    - ログに適切なエラーメッセージを残す。
        - このログは開発者が見るものなので、詳細な情報を残しましょう。そうすることで、エラーの原因が分かりやすくなります。

## 5. フロントエンドのレスポンシブ対応
現在では、様々なデバイス(PC、スマートフォン、タブレットなど)が存在します。各デバイスの画面の大きさに合わせた表示をしましょう。
